import{E as te}from"./B_7BQcw7.js";import{a as le,E as oe}from"./DLjhCIr3.js";import{_ as ae}from"./DwXTPvMl.js";import{E as se}from"./CcrDRzMA.js";import{_ as G}from"./B-mgPwf7.js";import{E as ne}from"./DxVYpD85.js";import{E as ie,a as ue,b as de}from"./Byr7iAoi.js";import{E as ce,a as re}from"./BMRdXg3M.js";import{E as pe,_ as _e}from"./CnH9_oJp.js";import{E as me}from"./DAxDWspi.js";import{E as he}from"./DMR-XGU2.js";import{E as O}from"./DV-9RaXj.js";import"./CQeKHPxD.js";import{f as ve,g as fe,r as m,h as ge,c as i,b as o,w as l,d as u,t as p,j as _,o as a,a as e,i as c,k as h,N as k,O as C,a1 as we,p as xe,e as ye}from"./DPhSw6dP.js";import{u as j}from"./B_2lqGbj.js";import{u as be}from"./D2uA2sNV.js";import{_ as Ee}from"./DlAUqK2U.js";import"./D3eqFg9O.js";import"./r5W6hzzQ.js";import"./BLuCr3G4.js";import"./DWXxeDNc.js";const s=b=>(xe("data-v-8fc156f1"),b=b(),ye(),b),ke=s(()=>e("h1",null,"NYKnow.com",-1)),Ce=s(()=>e("span",null,null,-1)),Ve=s(()=>e("span",null,null,-1)),ze=s(()=>e("span",null," 在此输入帖子的标题和分类,分类可以不选或选择'不选'这个选项(默认) ",-1)),Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",style:{width:"20px","vertical-align":"bottom"}},Se=s(()=>e("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384zM288 512h448v-64H288zm0 256h448v-64H288zm96-576V96h256v96z"},null,-1)),Be=[Se],Te=s(()=>e("span",null,"最热帖子",-1)),Ie={class:"latestPost"},$e=s(()=>e("span",null,"公告",-1)),Le=s(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),He=s(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),Ne=s(()=>e("div",{style:{height:"1px"}},null,-1)),Pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Ue=s(()=>e("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"},null,-1)),Ae=[Ue],Ge=s(()=>e("span",{style:{"padding-left":"5px"}}," 首页 ",-1)),Oe=s(()=>e("div",{class:"flex-grow"},null,-1)),je={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},De=s(()=>e("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"},null,-1)),Re=[De],Fe=s(()=>e("span",{style:{"padding-left":"5px","padding-right":"15px"}},"搜索",-1)),Ke={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},We=s(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),Ye=[We],qe=s(()=>e("span",{style:{"padding-left":"5px"}},"注册/登录",-1)),Je={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Qe=s(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),Xe=[Qe],Ze={style:{"padding-left":"5px"}},et={key:0,class:"searchBox"},tt=s(()=>e("img",{src:_e},null,-1)),lt=["innerHTML"],ot={style:{float:"right"}},at={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},st=s(()=>e("path",{fill:"currentColor",d:"m174.72 855.68 135.296-45.12 23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160 128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512 64 299.904 256 96 512 96s448 203.904 448 416-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1)),nt=s(()=>e("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4"},null,-1)),it=[st,nt],ut={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},dt=s(()=>e("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"},null,-1)),ct=[dt],rt=ve({__name:"index",setup(b){const g=fe(),M=be(),D=m("1"),w=m(""),x=m(""),V=m(!1),r=m(!1),E=m(1),z=m(!1);ge(async()=>{try{const n=await $fetch("https://nyknow.com/api/user",{method:"GET",credentials:"include"});n.code===0?(r.value=!0,M.setUserInfo(n.data)):r.value=!1}catch{}});const{data:S}=j("hotposts",()=>$fetch("http://localhost:3001/api/post/gethot",{method:"GET",credentials:"include",key:"hotposts"}));console.log("client1:",S);const{data:v}=j("posts",()=>$fetch(`http://localhost:3001/api/post/get?currentPage=${E.value}&keyWord=${w.value}&type=${x.value}`,{method:"GET",credentials:"include",key:"posts"}),{watch:[z,E]});console.log("client2:",v);const R=async n=>{n==="1"?g.push("/"):n==="2"?V.value=!V.value:n==="3"?T():n==="4-1"?g.push("/account/publish"):n==="4-2"&&I()},F=n=>{E.value=n},B=async()=>{z.value=!z.value},T=()=>{g.push("/login")},K=()=>{g.push("/signup")},I=async()=>{try{const n=await $fetch("https://nyknow.com/api/auth/logout",{method:"POST",credentials:"include"});n.code===0?(r.value=!1,O.success(n.message)):O.error("退出登录失败，请稍后再试")}catch{}},$=[{value:"招聘",label:"招聘"},{value:"求职",label:"求职"},{value:"出租",label:"出租"},{value:"新闻",label:"新闻"},{value:"活动",label:"活动"},{value:"生活",label:"生活"},{value:"科技",label:"科技"},{value:"娱乐",label:"娱乐"},{value:"教育",label:"教育"},{value:"社会",label:"社会"},{value:"编程",label:"编程"},{value:"其他",label:"其他"},{value:"",label:"不选"}];return(n,d)=>{const f=te,L=le,H=oe,N=ae,P=se,W=G,U=ne,y=ie,Y=ue,q=de,A=re,J=pe,Q=G,X=me,Z=he,ee=ce;return a(),i("div",null,[o(ee,null,{default:l(()=>[o(A,{xs:24,sm:24,md:6,lg:6,xl:6},{default:l(()=>[e("aside",null,[ke,r.value?h("",!0):(a(),c(f,{key:0,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:T},{default:l(()=>[u("登录")]),_:1})),Ce,r.value?h("",!0):(a(),c(f,{key:1,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:K},{default:l(()=>[u("注册")]),_:1})),r.value?(a(),c(f,{key:2,type:"primary",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:d[0]||(d[0]=t=>_(g).push("/account/publish"))},{default:l(()=>[u("个人中心")]),_:1})):h("",!0),Ve,r.value?(a(),c(f,{key:3,type:"danger",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:I},{default:l(()=>[u("退出登录")]),_:1})):h("",!0),ze,e("div",null,[o(N,null,{default:l(()=>[o(H,{modelValue:x.value,"onUpdate:modelValue":d[1]||(d[1]=t=>x.value=t),placeholder:"选择分类",style:{width:"100%"}},{default:l(()=>[(a(),i(k,null,C($,t=>o(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(P,{modelValue:w.value,"onUpdate:modelValue":d[2]||(d[2]=t=>w.value=t),placeholder:"输入要搜索的关键词",type:"text"},null,8,["modelValue"]),o(f,{type:"primary",style:{width:"100%","margin-top":"10px"},onClick:B},{default:l(()=>[u("搜索")]),_:1})]),(a(),i("svg",Me,Be)),Te,e("div",Ie,[e("ul",null,[(a(!0),i(k,null,C(_(S).data,t=>(a(),i("li",null,[o(W,{to:`/post/${t._id}`,class:"hotPost"},{default:l(()=>[u(p(t.title),1)]),_:2},1032,["to"])]))),256))])]),$e,e("div",null,[o(U,{shadow:"always"},{default:l(()=>[Le]),_:1}),o(U,{shadow:"always"},{default:l(()=>[He]),_:1})]),Ne]),e("header",null,[o(q,{"default-active":D.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:R},{default:l(()=>[o(y,{index:"1"},{default:l(()=>[(a(),i("svg",Pe,Ae)),Ge]),_:1}),Oe,o(y,{index:"2"},{default:l(()=>[(a(),i("svg",je,Re)),Fe]),_:1}),r.value?(a(),c(Y,{key:1,index:"4","close-on-click-outside":"true"},{title:l(()=>{var t;return[(a(),i("svg",Je,Xe)),e("span",Ze,p((t=_(M).userInfo)==null?void 0:t.username),1)]}),default:l(()=>[o(y,{index:"4-1"},{default:l(()=>[u("个人中心")]),_:1}),o(y,{index:"4-2",style:{color:"#f56c6c"}},{default:l(()=>[u(" 退出登录 ")]),_:1})]),_:1})):(a(),c(y,{key:0,index:"3"},{default:l(()=>[(a(),i("svg",Ke,Ye)),qe]),_:1}))]),_:1},8,["default-active"]),o(we,{name:"el-zoom-in-top"},{default:l(()=>[V.value?(a(),i("div",et,[o(P,{modelValue:w.value,"onUpdate:modelValue":d[4]||(d[4]=t=>w.value=t),placeholder:"输入关键词",size:"large"},{prepend:l(()=>[o(N,null,{default:l(()=>[o(H,{modelValue:x.value,"onUpdate:modelValue":d[3]||(d[3]=t=>x.value=t),placeholder:"选择",style:{width:"105px"},size:"large"},{default:l(()=>[(a(),i(k,null,C($,t=>o(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),append:l(()=>[o(f,{type:"primary",style:{width:"70px"},onClick:B},{default:l(()=>[u("搜索")]),_:1})]),_:1},8,["modelValue"])])):h("",!0)]),_:1})])]),_:1}),o(A,{xs:24,sm:24,md:18,lg:18,xl:18},{default:l(()=>[e("main",null,[(a(!0),i(k,null,C(_(v).data.result,t=>(a(),c(Q,{key:t._id,to:`/post/${t._id}`},{default:l(()=>[e("div",null,[o(J,{size:50,src:t.avatar,style:{"vertical-align":"middle"}},{default:l(()=>[tt]),_:2},1032,["src"]),e("span",null,p(t.username),1),e("h4",null,p(t.title),1),e("p",{class:"content",innerHTML:t.content,style:{width:"100%","margin-bottom":"5px"}},null,8,lt),e("span",null,p(t.createdAt.split("T")[0]),1),e("span",ot,[(a(),i("svg",at,it)),u(" "+p(t.comments)+" ",1),(a(),i("svg",ut,ct)),u(" "+p(t.visitors),1)])])]),_:2},1032,["to"]))),128)),_(v).data.total!==0?(a(),c(X,{key:0,background:"",layout:"prev, pager, next",total:_(v).data.total,"page-size":10,"pager-count":5,style:{"justify-content":"center"},"current-page":E.value,onCurrentChange:F},null,8,["total","current-page"])):h("",!0),_(v).data.total===0?(a(),c(Z,{key:1,description:"没有找到对应的帖子","image-size":200})):h("",!0)])]),_:1})]),_:1}),u(" "+p(_(v)),1)])}}}),$t=Ee(rt,[["__scopeId","data-v-8fc156f1"]]);export{$t as default};
